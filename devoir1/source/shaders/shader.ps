struct ps_in
{
	float4 Pos : SV_POSITION;
	float3 FragPos : FRAGPOS;
	float3 Normal : NORMAL;
	float2 TexCoord : TEXCOORD;
};

SamplerState LinearSampler : register(s0);
Texture2D ColorTexture : register(t0);

float4
main(ps_in Input) : SV_TARGET
{
	// Light params
	float3 LightPos = float3(-17.5, 50.0, -80.0);
	float3 LightColor = float3(1, 1, 1);

	float3 ObjectColor = ColorTexture.Sample(LinearSampler, Input.TexCoord).xyz;

	// Ambient
	float AmbientStrength = 0.05f;
	float3 Ambient = AmbientStrength * LightColor;

	// Diffuse
	float3 Normal = normalize(Input.Normal);
	float3 LightDir = normalize(LightPos - Input.FragPos);
	float DiffuseStrength = abs(dot(Normal, LightDir));
	float3 Diffuse = DiffuseStrength * LightColor;

	// Result
	float3 Result = (Ambient + Diffuse) * ObjectColor;
	
	return float4(Result, 1);
}

